        -:    0:Source:/nix/store/7rfaw11na5ajdgwr55ffzwfibbrdpk8z-glibc-2.33-56-dev/include/bits/poll2.h
        -:    0:Graph:logger.gcno
        -:    0:Data:logger.gcda
        -:    0:Runs:396
        -:    1:/* Checking macros for poll functions.
        -:    2:   Copyright (C) 2012-2021 Free Software Foundation, Inc.
        -:    3:   This file is part of the GNU C Library.
        -:    4:
        -:    5:   The GNU C Library is free software; you can redistribute it and/or
        -:    6:   modify it under the terms of the GNU Lesser General Public
        -:    7:   License as published by the Free Software Foundation; either
        -:    8:   version 2.1 of the License, or (at your option) any later version.
        -:    9:
        -:   10:   The GNU C Library is distributed in the hope that it will be useful,
        -:   11:   but WITHOUT ANY WARRANTY; without even the implied warranty of
        -:   12:   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
        -:   13:   Lesser General Public License for more details.
        -:   14:
        -:   15:   You should have received a copy of the GNU Lesser General Public
        -:   16:   License along with the GNU C Library; if not, see
        -:   17:   <https://www.gnu.org/licenses/>.  */
        -:   18:
        -:   19:#ifndef _SYS_POLL_H
        -:   20:# error "Never include <bits/poll2.h> directly; use <sys/poll.h> instead."
        -:   21:#endif
        -:   22:
        -:   23:
        -:   24:__BEGIN_DECLS
        -:   25:
        -:   26:extern int __REDIRECT (__poll_alias, (struct pollfd *__fds, nfds_t __nfds,
        -:   27:				      int __timeout), poll);
        -:   28:extern int __poll_chk (struct pollfd *__fds, nfds_t __nfds, int __timeout,
        -:   29:		       __SIZE_TYPE__ __fdslen);
        -:   30:extern int __REDIRECT (__poll_chk_warn, (struct pollfd *__fds, nfds_t __nfds,
        -:   31:					 int __timeout, __SIZE_TYPE__ __fdslen),
        -:   32:		       __poll_chk)
        -:   33:  __warnattr ("poll called with fds buffer too small file nfds entries");
        -:   34:
        -:   35:__fortify_function int
        -:   36:poll (struct pollfd *__fds, nfds_t __nfds, int __timeout)
        -:   37:{
     3395:   38:  if (__glibc_objsize (__fds) != (__SIZE_TYPE__) -1)
        -:   39:    {
     3395:   40:      if (! __builtin_constant_p (__nfds))
     3395:   41:	return __poll_chk (__fds, __nfds, __timeout, __glibc_objsize (__fds));
    #####:   42:      else if (__glibc_objsize (__fds) / sizeof (*__fds) < __nfds)
    #####:   43:	return __poll_chk_warn (__fds, __nfds, __timeout,
        -:   44:				__glibc_objsize (__fds));
        -:   45:    }
        -:   46:
    #####:   47:  return __poll_alias (__fds, __nfds, __timeout);
        -:   48:}
        -:   49:
        -:   50:
        -:   51:#ifdef __USE_GNU
        -:   52:extern int __REDIRECT (__ppoll_alias, (struct pollfd *__fds, nfds_t __nfds,
        -:   53:				       const struct timespec *__timeout,
        -:   54:				       const __sigset_t *__ss), ppoll);
        -:   55:extern int __ppoll_chk (struct pollfd *__fds, nfds_t __nfds,
        -:   56:			const struct timespec *__timeout,
        -:   57:			const __sigset_t *__ss, __SIZE_TYPE__ __fdslen);
        -:   58:extern int __REDIRECT (__ppoll_chk_warn, (struct pollfd *__fds, nfds_t __nfds,
        -:   59:					  const struct timespec *__timeout,
        -:   60:					  const __sigset_t *__ss,
        -:   61:					  __SIZE_TYPE__ __fdslen),
        -:   62:		       __ppoll_chk)
        -:   63:  __warnattr ("ppoll called with fds buffer too small file nfds entries");
        -:   64:
        -:   65:__fortify_function int
        -:   66:ppoll (struct pollfd *__fds, nfds_t __nfds, const struct timespec *__timeout,
        -:   67:       const __sigset_t *__ss)
        -:   68:{
        -:   69:  if (__glibc_objsize (__fds) != (__SIZE_TYPE__) -1)
        -:   70:    {
        -:   71:      if (! __builtin_constant_p (__nfds))
        -:   72:	return __ppoll_chk (__fds, __nfds, __timeout, __ss,
        -:   73:			    __glibc_objsize (__fds));
        -:   74:      else if (__glibc_objsize (__fds) / sizeof (*__fds) < __nfds)
        -:   75:	return __ppoll_chk_warn (__fds, __nfds, __timeout, __ss,
        -:   76:				 __glibc_objsize (__fds));
        -:   77:    }
        -:   78:
        -:   79:  return __ppoll_alias (__fds, __nfds, __timeout, __ss);
        -:   80:}
        -:   81:#endif
        -:   82:
        -:   83:__END_DECLS
